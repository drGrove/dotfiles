var LP_GETNAME_FAVOR_ID_OVER_NAME=!0,LP_GETNAME_FAVOR_NAME_OVER_ID=!1,g_popupfill_rows=0,g_popupfill_rows_FF=0,g_weasel_id=null,g_weaseled=!1,g_autofillsites={},g_popupfill_widest=260,g_popupfill_max=1,g_popupfill_ctr=0,g_popupfill_parent=null,g_popupfill_parent_last=null,g_isadmin=!1,CLICKABLE_ICON_ZINDEX=1E8,popup_show_sitename_suffix=!0,popup_show_menu_expand_visual_cue=!0,g_last_field_focused=null,g_minwidth_override=0,g_minheight_override=0,g_popupfill_iframe_width_save=0,g_popupfill_iframe_height_save=
0,g_do_pwgen=!1,g_hide_navbar=!0,LPICON_HEIGHT=16,LPICON_WIDTH=16,g_double_password_hack=!1,g_double_secret_password_hack=!1,g_popup_divs={},g_input_cnt=-1,g_keyboardNav=!1,g_more_close_on_cancel=!1,g_more_enable_return=!0,create_onerow_iframe=!0,do_autofill_if_matched=!1,do_popup_actions=!0,popup_actions_cfg={sites:{str:"Sites",id:"popupaction_sites"},generate:{str:"Generate",id:"popupaction_generate"},savesite:{str:"Save Site",id:"popupaction_savesite"},formfill:{str:"Form Fill Profile",id:"popupaction_formfillprofile"},
never:{str:"Disable...",id:"popupaction_never"}},popup_actions_imgs={},g_frame_css_str="",g_ctr_getAbsPos=0,g_ctr_weasel=0,g_ctr_getzindex=0,g_ctr_getWW=0,g_ctr_nosetheight_A=0,g_ctr_setheight_A=0,g_ctr_setwidth_B=0,g_ctr_nosetwidth_B=0,g_ctr_setheight_C=0,g_ctr_nosetheight_C=0,g_ctr_setwidth_D=0,g_ctr_nosetwidth_D=0,g_ctr_settop_E=0,g_ctr_nosettop_E=0,g_ctr_settop_F=0,g_ctr_nosettop_F=0,g_ctr_setleft_G=0,g_ctr_nosetleft_G=0,g_ctr_recheck=0,g_ctr_setposition_H=0,g_ctr_nosetposition_H=0,g_ctr_setzindex_J=
0,g_ctr_nosetzindex_J=0,g_ctr_numspan_setzindex_K=0,g_ctr_numspan_nosetzindex_K=0,g_ctr_numspan_setzindex_L=0,g_ctr_numspan_nosetzindex_L=0,g_ctr_measureText=0,g_ctr_measureText_cachehits=0,g_ctr_measureText_cachemisses=0,g_ctr_formcache_hits=0,g_ctr_formcache_misses=0,g_ctr_form_get_username_M=0,g_ctr_form_get_password_N=0,g_ctr_orphan_get_username_P=0,g_ctr_orphan_get_password_Q=0,g_ctr_looksLikeUsername_R=0,g_ctr_mutation_observer=0,g_ctr_mutation_attribute_chg_S=0,g_ctr_mutation_attribute_chg_force_T=
0,g_is_specialsite=null,g_nevers={},g_last_recheck=null,FORCE_OFFER_GENERATE=!0,NO_FORCE_GENERATE=!1,FORCE_SHOW_NOHITS=!0,NO_FORCE_NOHITS=!1,FORCE_SHOW_NOHITS_NOLOGIN=2,g_icon_shading=!1,g_do_icon_number_hint=!0,g_icon_hover=!0,g_icon_parent_hover=!0,g_icon_number_overrides={sites:-1,formfills:-1},g_icon_numbers={sites:0,formfills:0},g_visual_cue_on_hover=!0,g_show_icon_only_on_focus=!1,g_show_save_success_msg=!0,g_save_suggest_msg=!1,g_creditcard_profile_annotate=!0,g_show_icon_number_for_formfills=
!1,g_save_suggest_msg_seen=!1,g_change_icon_on_input=!0,g_savesitesuperbox=!0,g_dologin_clickable=!0,g_use_grey_icons=!0,FADE_MAXSTATES=100,g_aspx_hack=!0,g_found_aspx=!1,g_clickable_input=!0,g_clickable_input_on_password=!0,g_popup_active_username=null,g_popup_active_password=null,g_extended_kbd_nav=!1,g_iframe_scroll_hack=!0,g_frame_scrollable_set=!1,g_defensive=!0,g_pw_ico="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABMUlEQVQ4T32SgVHDMAxF6QZ0AswELRuECcoGhAloJwAmACZomAA6QbMBZYKaDRih/+UkTvHF1d0/x/L317eU2cX5WNrxoUabTRwk5Z6EtjjrtH8RcsyXAlx6FS6FneCVcbIS/oSNgNgQUQDSt/Bj1UvbnHNxIdy4eBTolYQEsOkXKIQzBL0I3NvoIGlzFN6Ftbl71gqRaAT2xJvwKFwL2R1A2Jsql6hEL7JdSlp5Oy7uhE/nukCrxDYIUI1JxGAC5L3Yg7670sGQNGJNwMXpQR+byIjoAx3mCViN8aVNFpjUXGDUozG6srvgPJkYlwnc3Qv+nJEAhNZIfDcCzfoVeA4FcPZhvEFx6ld2IZpaxn9lP6gJUAnbV+aA6uzp0yhqApBoUmdrM+Hm7BMiP2mTawInofVEEf5J2pUAAAAASUVORK5CYII=",
pw_svg="";("undefined"==typeof g_isie||!g_isie)&&"function"==typeof getchromeurl?pw_svg=getchromeurl("images/svg/generate16x16.svg"):"undefined"!=typeof g_isie&&g_isie&&(pw_svg=g_pw_ico);
var g_ff_ico="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAvElEQVQ4T2NkoBAwIukXALL9gViBgJkPgPIbgfgDSB2yAQVAfj+RDioEqpuAbkADUKAeiB0JGLIfKN8IxCD1KC6AGYDsqgtANf+B2BDJUBCfaAM2QDUGkGMAcpjA/Qx1EVEugHkJZDlcA7EGgKJSHi0wHwL5D4g1wAGoEISRwQEgB4SJCkSQZns0Aw6SYgDICyCMDEDOJ8oL6E5HMwfsDayxQHFSBmUmUIJBdzq6C0DeWAATRE626AqJ4gMAKh82EQu8MAEAAAAASUVORK5CYII=",ff_svg="";
("undefined"==typeof g_isie||!g_isie)&&"function"==typeof getchromeurl?ff_svg=getchromeurl("images/svg/formfill16x16.svg"):"undefined"!=typeof g_isie&&g_isie&&(ff_svg=g_ff_ico);
var g_sites_ico="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA2ElEQVQ4T7WTjRHBUBCEkw50gApQgehACXRABaICOqADLUQHOkAHSrCfuZjzvCdmws3svL+9vdvLJM9aRt4yP0sJ9CQMKiswtPUUFowJLERaCTeh7xIH2q+F0oukBDZGmtu6c+d9kwDvtD4WLkbGzlEoPlmA1DXCVes5IM+cIO8PcW8Bb3j/Jp6z+KkAFgDBWg+u7mhkm461/2bBt17pwBDxSjAb7iahv9hnnIp0MGL4GZe633qRmEApAsOkOlYI2qV13hoFSCAR0DZRmAhCL/G3nykslDzfAe0PJRG6UnPYAAAAAElFTkSuQmCC",sites_svg="";
("undefined"==typeof g_isie||!g_isie)&&"function"==typeof getchromeurl?sites_svg=getchromeurl("images/svg/sites16x16.svg"):"undefined"!=typeof g_isie&&g_isie&&(sites_svg=g_sites_ico);
var g_close_ico="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAl0lEQVQ4T7VTgQ2AIAyTC/RD9QO9QLxAP1A/1A9sDZgFo0CQJctcWOs6hioSTRl8hVjDGUNsR9EG3y1Bh2QKQYqaHt+zJdBIhkiCEfU6G8HB9kRX/BtllqLLzw6uQ3hjAKvJpUyvhBYgAmkkWpwZ5SVIlsBF4RA5BxojhygXzSvBkfxI/yVIXmVq41XFPCZe8f2YfHpfz0+q7C4R/Q4GAgAAAABJRU5ErkJggg==",close_svg="";
("undefined"==typeof g_isie||!g_isie)&&"function"==typeof getchromeurl?close_svg=getchromeurl("images/svg/close16x16.svg"):"undefined"!=typeof g_isie&&g_isie&&(close_svg=g_close_ico);var g_svgs={},NAV_BAR_HEIGHT_CSS=42,SHOULD_DO_LOGIN_ONLY=!0,SHOULD_DO_ALWAYS=!1;
function popupfill_shoulddofield(a,b,c){var d=[];if(do_experimental_popupfill){if(!(null==b||"undefined"==typeof b.type)&&("password"==b.type||"text"==b.type||"email"==b.type||!c&&"tel"==b.type||!c&&"url"==b.type||!c&&"textarea"==b.type)){var f=LP_getname(b,LP_GETNAME_FAVOR_ID_OVER_NAME);if(lp_in_array(f,d))return verbose_log("fieldname "+f+" is blacklisted, skipping"),!1;if(is_search_field(a,b))return!1;if(c&&!chk_form_has_password(a,b.form)&&!checkDocumentForLoginOrphans(a)){if(verbose){var e;null!=
b.form&&(e=null==b.form.id?"(null)":b.form.id);console_log("form "+e+" has no password field?  Ignored")}return!1}}else return!1;return!0}}var NO_CREATE=!1,OK_CREATE=!0;
function create_or_move_overlay_icon(a,b,c,d,f){if(do_experimental_popupfill&&!(null==b||0>=b.length)){var e=LP_getElementByIdOrName(a,b);if(null!=e&&"function"!=typeof e){var g=a.getElementsByTagName("body")[0],h,k,l=LP_getElementByIdOrName(a,MAGIC+LP_getname(e,LP_GETNAME_FAVOR_ID_OVER_NAME));if(null==l)if("undefined"!=typeof c&&!0==c){var j;j="generate"==d?!0:shouldOfferGenerate(a,e);k=a.createElement("div");k.id=MAGIC+LP_getname(e,LP_GETNAME_FAVOR_ID_OVER_NAME);null!=d&&(k.setAttribute("intrinsic",
d),"undefined"!=typeof g_isfirefox&&g_isfirefox&&null!=f&&null!=f[d]&&k.setAttribute("intrinsic2",f[d]));"undefined"!=typeof g_isfirefox&&g_isfirefox?(null==a.g_popup_divs&&(a.g_popup_divs={}),a.g_popup_divs[k.id]=k.id):g_popup_divs[k.id]=k.id;h=a.createElement("img");e.offsetHeight<LPICON_WIDTH&&(h.height=e.offsetHeight,h.width=h.height);h.id=k.id+"_icon";b=!0;null!=d&&("formfills"==d?(h.src=ff_svg,h.setAttribute("onerror","this.removeAttribute('onerror'); this.src = '"+g_ff_ico+"';"),h.style.opacity=
"0.6",h.style.filter="alpha(opacity=60)",b=!1):"generate"==d&&(g_use_grey_icons?(h.src=pw_svg,h.setAttribute("onerror","this.removeAttribute('onerror'); this.src = '"+g_pw_ico+"';")):h.src=g_ff_ico,h.style.opacity="0.6",h.style.filter="alpha(opacity=60)",b=!1));b&&(h.src=sites_svg,h.setAttribute("onerror","this.removeAttribute('onerror'); this.src = '"+g_sites_ico+"';"),h.style.opacity="0.6",h.style.filter="alpha(opacity=60)");k.appendChild(h);if(g_do_icon_number_hint&&!(("formfills"==d||"generate"==
d||j)&&!1===g_show_icon_number_for_formfills)){var m=a.createElement("div");m.id=k.id+"_numspan";null!=d&&null!=f&&null!=f[d]&&0<f[d]?("sites"==d&&e.setAttribute("autocomplete","off"),m.innerHTML=9>f[d]?" "+lp_of(f[d],a):lp_of(f[d],a)):m.innerText="";m.style.position="absolute";m.style.top="-1000px";m.style.left="-1000px";g.appendChild(m);addEventHandler(m,"click",function(b){set_active_username_password(a,e.form);popupfilltoggle(a,k.id,e,j,FORCE_SHOW_NOHITS,!1,"formfills"==d);stopEventPropagation(b);
return!1});g_defensive&&addEventHandler(m,"mousedown",function(a){stopEventPropagation(a);return!1})}g.appendChild(k);k.style.maxHeight=LPICON_WIDTH+"px";k.style.verticalAlign="top";h.style.verticalAlign="top";"undefined"!=typeof g_docnum&&verbose_log("["+g_docnum+"] setting up click listener on icon for "+LP_getname(e,LP_GETNAME_FAVOR_ID_OVER_NAME));j&&g_do_icon_number_hint&&(k.setAttribute("intrinsic","generate"),h.src=pw_svg,h.setAttribute("onerror","this.removeAttribute('onerror'); this.src = '"+
g_pw_ico+"';"),h.style.opacity="0.6",h.style.filter="alpha(opacity=60)");addEventHandler(k,"click",function(b){set_active_username_password(a,e.form);popupfilltoggle(a,k.id,e,j,FORCE_SHOW_NOHITS,!1,"formfills"==d);stopEventPropagation(b);return!1});g_defensive&&addEventHandler(k,"mousedown",function(a){stopEventPropagation(a);return!1});g_icon_hover&&(addEventHandler(k,"mouseover",function(b){do_icon_mouseover(a,k.id,e);stopEventPropagation(b);return!1}),addEventHandler(k,"mouseout",function(b){do_icon_mouseout(a,
k.id,e);stopEventPropagation(b);return!1}));g_icon_parent_hover&&(addEventHandler(e,"mouseover",function(b){do_icon_mouseover(a,k.id,e);stopEventPropagation(b);return!1}),addEventHandler(e,"mouseout",function(b){do_icon_mouseout(a,k.id,e);stopEventPropagation(b);return!1}));addEventHandler(g,"DOMsubtreemodified",function(){popupfill_resize();return!1},!1);addEventHandler(g,"resize",function(){popupfill_resize();return!1},!1);g.onresize=onresize_handler;addEventHandler(a,"keydown",function(a){keypress_handler(a)},
!1);addEventHandler(e,"keydown",function(a){field_keypress_handler(a,e,d)},!1)}else{"undefined"!=typeof g_isfirefox&&g_isfirefox?a&&delete a.g_popup_divs[b]:delete g_popup_divs[b];h=a.createElement("img");return}else k=l,g_do_icon_number_hint&&(m=a.getElementById(k.id+"_numspan"),null!=m&&(m.innerText=null!=d&&null!=f&&null!=f[d]&&1<f[d]?("formfills"==d||"generate"==d)&&!1===g_show_icon_number_for_formfills?"":9>f[d]?" "+f[d]:f[d]:""));"absolute"!=k.style.position?(k.style.position="absolute",g_ctr_setposition_H++):
g_ctr_nosetposition_H++;g=getAbsolutePos(a,e);if(null!=g){if(e.offsetHeight>LPICON_WIDTH?(b=g.top+(e.offsetHeight-LPICON_WIDTH)/2+"px",k.style.top!=b?(g_ctr_settop_E++,k.style.top=b):g_ctr_nosettop_E++):k.style.top!=g.top+"px"?(g_ctr_settop_F++,k.style.top=g.top+"px"):g_ctr_nosettop_F++,g=g.left+e.offsetWidth-LPICON_WIDTH-2+"px",k.style.left!=g?(g_ctr_setleft_G++,k.style.left=g):g_ctr_nosetleft_G++,g_do_icon_number_hint&&(null==h&&(h=a.getElementById(k.id+"_icon")),g=parseInt(k.style.left),b=parseInt(k.style.top),
null!=m))if(null!=d&&null!=f&&null!=f[d]&&1<f[d]){var n=f[d];0<f[d]&&9>f[d]&&(n=" "+f[d]);n=measureText(a,lp_of(n,a),null,"font-size: 9px;font-family: Helvetica,Arial,sans-serif;font-weight:bold;line-height:11px;");if(null!=n){var p=b+("undefined"==typeof h.height||0==h.height?LPICON_HEIGHT:h.height)-n.height+6+"px",q=g+("undefined"==typeof h.width||0==h.width?LPICON_WIDTH:h.width)-n.width-2+"px",n="#ff2200";g_use_grey_icons&&(n="#808080");n="position:absolute !important; visibility:visible !important; border:0px !important; font-size:9px !important; font-family: Helvetica Neue,Helvetica,Arial,sans-serif; top:"+
p+" !important; left:"+q+" !important; background-color: "+n+"; padding: 1px 2px !important; font-weight: bold !important; color:#ffffff !important; cursor: default; line-height:11px !important; max-width: 10px !important; ";h="undefined"!=typeof window&&window?window:a.defaultView;h="undefined"!=typeof h.getComputedStyle?h.getComputedStyle(m):m.currentStyle;f=h.zIndex;""!==f&&"auto"!=f&&(n=n+"z-index:"+f+" !important;");"absolute"!=h.position||"visible"!=h.visibility||"9px"!=h.fontSize||"1px 2px"!=
h.padding||"11px"!=h.lineHeight||h.top!=p||h.left!=q?(m.style.cssText=n,g_ctr_numspan_setzindex_L++):g_ctr_numspan_nosetzindex_L++}else n="display:none;",m.style.cssText=n}else n="display:none;",m.style.cssText=n}else verbose_log("ERROR: unable to relocate clickable icon");f=getZIndex(a,e,0,0);null!=f?f++:f=CLICKABLE_ICON_ZINDEX;k.style.zIndex!=f?(g_ctr_setzindex_J++,k.style.zIndex=f):g_ctr_nosetzindex_J++;g_do_icon_number_hint&&null!=m&&(n=n+"z-index:"+(f+1)+" !important;",h="undefined"!=typeof window&&
window?window:a.defaultView,h="undefined"!=typeof h.getComputedStyle?h.getComputedStyle(m):m.currentStyle,"absolute"!=h.position||"visible"!=h.visibility||"9px"!=h.fontSize||"1px 2px"!=h.padding||"11px"!=h.lineHeight||h.top!=p||h.left!=q||h.zIndex!=f+1?(m.style.cssText=n,g_ctr_numspan_setzindex_K++):g_ctr_numspan_nosetzindex_K++);k.style.display=checkIsDisplayed(a,e,0)?"":"none";h=k.childNodes[0];parseInt(e.offsetHeight)<LPICON_WIDTH?(e.offsetHeight!=h.height?(g_ctr_setheight_A++,h.height=parseInt(e.offsetHeight)):
g_ctr_nosetheight_A++,e.offsetHeight!=h.height?(g_ctr_setwidth_B++,h.width=h.height):g_ctr_nosetwidth_B++):(h.height!=LPICON_WIDTH?(g_ctr_setheight_C++,h.height=LPICON_WIDTH):g_ctr_nosetheight_C++,h.width!=LPICON_WIDTH?(g_ctr_setwidth_D++,h.width=LPICON_WIDTH):g_ctr_nosetwidth_D++)}}}function parse_zindex(a){if("string"==typeof a&&-1!=a.indexOf("e")){a=""+parseFloat(a);for(var b="",c=a.length-1;0<=c&&"0"==a.charAt(c);c--)b+="9";a=a.substring(0,c+1)+b}return parseInt(a)}
function getZIndex(a,b,c,d){g_ctr_getzindex++;if(null==a||b==a.body||null==b||50<c)return null;var f=0,f="undefined"!=typeof window&&window?window:a.defaultView,e;e="undefined"!=typeof f.getComputedStyle?f.getComputedStyle(b):b.currentStyle;if("absolute"==e.position||"relative"==e.position||"fixed"==e.position){if("auto"==e.zIndex||""===e.zIndex)return f=getZIndex(a,b.parentNode,c+1,d+1),null==f?0:parse_zindex(f);f=getZIndex(a,b.parentNode,c+1,parse_zindex(e.zIndex));return null==f?parse_zindex(e.zIndex)+
1:parse_zindex(f)+1}if("auto"==e.zIndex||""==e.zIndex)return f=getZIndex(a,b.parentNode,c+1,d+1),null==f?d+1:parse_zindex(f)+1;f=getZIndex(a,b.parentNode,c+1,parse_zindex(e.zIndex));return null==f?parse_zindex(e.zIndex):parse_zindex(f)+1}
function shouldOfferGenerate(a,b){if(null==a||null==b)return null;var c=!1,d=b.form,f=!0,e=!0,g=check_nevers(a,g_nevers,a.location.href);null!=g&&(f=g.show_for_generate,e=g.show_for_clickable_icon);f&&(chk_form_ask_generate(a,d)&&isInputFieldPassword(a,b)&&e)&&(chk_form_changepw(a,d)&&b==lpCheckCurrentPWField(d)?(c=!1,"undefined"!=typeof g_docnum&&verbose_log("["+g_docnum+"] form="+LP_getname(d,LP_GETNAME_FAVOR_ID_OVER_NAME)+" field="+LP_getname(b,LP_GETNAME_FAVOR_ID_OVER_NAME)+" appears to be current PW field in a change password form, offergenerate=false")):
(c=!0,"undefined"!=typeof g_docnum&&verbose_log("["+g_docnum+"] form="+LP_getname(d,LP_GETNAME_FAVOR_ID_OVER_NAME)+" field="+LP_getname(b,LP_GETNAME_FAVOR_ID_OVER_NAME)+" setting up generate click listener on icon")));return c}
function check_nevers(a,b,c){b={show_for_formfill:!0,show_for_save:!0,show_for_autofill:!0,show_for_generate:!0,show_for_clickable_icon:!0};if(null==g_nevers)return null;if(null==c||0>=c.length)c=a.location.href;a=lpcanonizeUrl(c);c=lpcanonizeUrl(lp_gettld_url(c));for(var d=0;d<objectSize(g_nevers);d++){var f=g_nevers[d];0==f.domain&&lpcanonizeUrl(f.url)!=a||1==f.domain&&c!=lpcanonizeUrl(lp_gettld_url(f.url))||("neverformfills"==f.type?b.show_for_formfill=!1:"neveraccounts"==f.type?b.show_for_save=
!1:"neverautofills"==f.type?b.show_for_autofill=!1:"neverautologins"==f.type?b.show_for_autofill=!1:"nevergenerates"==f.type?b.show_for_generate=!1:"nevershowicons"==f.type&&(b.show_for_clickable_icon=!1))}return b}function objectSize(a){var b,c=0;if(null==a||"undefined"==typeof a)return 0;if("function"!=typeof a.hasOwnProperty&&"undefined"!=typeof a.length)return a.length;for(b in a)a.hasOwnProperty(b)&&c++;return c}
function chk_form_ask_generate(a,b,c){if(null==a||null==b)return!1;var d=LP_getname(b,LP_GETNAME_FAVOR_ID_OVER_NAME),f=formcacheget(a,d,"ask_generate");if(null!=f)return g_ctr_formcache_hits++,f;g_ctr_formcache_misses++;var f=lp_gettld_url(punycode.URLToASCII(a.location.href)),e=0,g=0,h=3;c&&(h=2);g_aspx_hack&&g_found_aspx&&(h=7);if("tumblr.com"==f&&(tumblr_action_btn=a.getElementById("signup_forms_submit"),null!=tumblr_action_btn)){var k=tumblr_action_btn.getElementsByTagName("SPAN"),l;for(l=0;l<
k.length;l++)if(0<=k[l].className.indexOf("login_btn")&&checkIsDisplayed(a,k[l],0,f))return!1}if(!checkIsDisplayed(a,b,0,f))return verbose_log("form is not visible: cannot be signup form"),!1;k=LP_getname(b,LP_GETNAME_FAVOR_ID_OVER_NAME);if(null!=k&&(0<=k.toLowerCase().indexOf("signup")||0<=k.toLowerCase().indexOf("register"))&&-1==k.toLowerCase().indexOf("login"))return verbose_log("form "+k+" smells like a sign up form: name/classname"),formcacheset(a,d,"ask_generate",!0),!0;k=!1;b=b.elements;for(l=
0;l<b.length;l++){var j=b[l],k=!1;if("FIELDSET"!=j.tagName&&!0!=j.disabled&&("expedia.com"==f||checkIsDisplayed(a,j,0,f))){if("text"==j.type&&is_watermark(j.className)&&is_watermark_password(j))try{j.type="password"}catch(m){k=!0}if("BUTTON"==j.tagName&&"submit"==j.type&&null!=j.innerText&&0<=j.innerText.indexOf("Create")||"BUTTON"==j.tagName&&"submit"==j.type&&null!=j.innerText&&0<=j.innerText.indexOf("Register")||"INPUT"==j.tagName&&"submit"==j.type&&null!=j.value&&0<=j.value.indexOf("Create")||
"INPUT"==j.tagName&&"submit"==j.type&&null!=j.value&&0<=j.value.indexOf("Register")||"INPUT"==j.tagName&&"submit"==j.type&&null!=j.value&&0<=j.value.indexOf("Sign me up")||"INPUT"==j.tagName&&"image"==j.type&&null!=j.value&&"create"==j.value)h=2,verbose_log("form "+d+" has a signup button, loosening detection requirements");if(!("text"==j.type&&(fieldIsDoublePassword(a,j)===DOUBLE_PW_VISIBLE||fieldIsDoublePassword(a,j)===DOUBLE_SECRET_PW_VISIBLE))){if("password"==j.type||k||"text"==j.type&&fieldIsDoublePassword(a,
j)===DOUBLE_TEXT_VISIBLE||"text"==j.type&&fieldIsDoublePassword(a,j)===DOUBLE_SECRET_TEXT_VISIBLE){k=j.getAttribute("placeholder");null!=k&&0<=k.indexOf("Create your")&&(h=2);if("facebook.com"==f&&"string"==typeof j.id&&j.id.match(/^[a-z0-9]{6}_\d{1,2}_ci_password$/))continue;else if("tdbank.com"==f&&"string"==typeof j.name&&"user"==j.name){g++;continue}e++}else if("email"==j.type||"text"==j.type||"textarea"==j.type||"tel"==j.type||"url"==j.type)"text"==j.type&&(0==j.name.indexOf("pass")||0==j.name.toLowerCase().indexOf(lpgs("Password").toLowerCase()))?
e++:g++;if(4<=e||100<=g)return 4<=e&&verbose_log("form "+d+" is not a signup form, too many pw fields [PW:"+e+"/NON:"+g+"]"),100<=g&&verbose_log("form "+d+" is not a signup form, too many non-pw fields [PW:"+e+"/NON:"+g+"]"),c||formcacheset(a,d,"ask_generate",!1),!1;if(2<=e||1<=e&&g>=h)return 2<=e&&verbose_log("form "+d+" is a signup form, has enough pw fields [PW:"+e+"/NON:"+g+"]"),1<=e&&g>=h&&verbose_log("form "+d+" is a signup form, has enough pw fields and non-pw fields [PW:"+e+"/NON:"+g+"]"),
c||formcacheset(a,d,"ask_generate",!0),!0}}}verbose_log("form "+d+" does not smell like signup form, not enough fields [PW:"+e+"/NON:"+g+"]");formcacheset(a,d,"ask_generate",!1);return!1}
function chk_form_is_nonlogin_form(a,b){if(null==a||null==b)return!1;var c=lp_gettld_url(punycode.URLToASCII(a.location.href)),d=LP_getname(b,LP_GETNAME_FAVOR_ID_OVER_NAME),f=formcacheget(a,d,"is_nonlogin");if(null!=f)return g_ctr_formcache_hits++,f;g_ctr_formcache_misses++;if(is_search_form(a,b))return verbose_log("form "+d+" appears to be a search form based on name/action, do not try to fill"),formcacheset(a,d,"is_nonlogin",!1),!1;if(!checkIsDisplayed(a,b,0,c))return verbose_log("form is not visible: cannot be non-login form"),
!1;for(var f=c=0,e=b.elements,g=0;g<e.length;g++){var h=e[g];if("FIELDSET"!=h.tagName&&("email"==h.type||"text"==h.type||"password"==h.type)&&!0!=h.disabled){if(100<++f)return formcacheset(a,d,"is_nonlogin",!1),!1;if(!0!=h.disabled&&lpIsVisible(h)){if(is_search_field(a,h))return verbose_log("form "+d+" appears to be a search form based on name/classname, do not try to fill"),formcacheset(a,d,"is_nonlogin",!1),!1;c++;if(3<=c)return verbose_log("form "+d+" appears to be a non-login form"),formcacheset(a,
d,"is_nonlogin",!0),!0}}}formcacheset(a,d,"is_nonlogin",!1);return!1}function formcacheset(a,b,c,d){if(null==a||null==b||null==c||0===b.length||0===c.length||null==d)return null;"undefined"==typeof a.g_form_attr_cache&&(a.g_form_attr_cache=[]);null==a.g_form_attr_cache[b]&&(a.g_form_attr_cache[b]={});a.g_form_attr_cache[b][c]=d;return!0}
function formcacheget(a,b,c){return null==a||(null==b||null==c||0===b.length||0===c.length)||"undefined"==typeof a.g_form_attr_cache?null:null!=a.g_form_attr_cache[b]&&null!=a.g_form_attr_cache[b][c]?a.g_form_attr_cache[b][c]:null}function formcachereset(a){null!=a&&(a.g_form_attr_cache=[]);return!0}
function onresize_handler(a){a="undefined"!=typeof document?document:a.target.document;var b=a.getElementsByTagName("body")[0];a.g_posbodyrect_cache=b.getBoundingClientRect();var c="undefined"!=typeof window&&window?window:a.defaultView;a.g_posbodystyle_cache="undefined"!=typeof c.getComputedStyle?c.getComputedStyle(b,null):b.currentStyle;popupfill_resize();return!1}
function checkIsDisplayed(a,b,c,d){if(b==a.body||null==b||50<c)return!0;null==d&&(d=lp_gettld_url(punycode.URLToASCII(a.location.href)));try{var f="undefined"!=typeof window&&window?window:a.defaultView,e;e="undefined"!=typeof f.getComputedStyle?f.getComputedStyle(b):b.currentStyle;if(null!=e&&"none"!=e.display&&"hidden"!=e.visibility&&(null==b.offsetHeight||""===b.offsetHeight||1<b.offsetHeight||"hidden"!=e.overflow)&&!("expedia.com"==d&&"-1px"==e.marginTop&&1==b.offsetHeight)&&!("dropbox.com"==
d&&"register-partial-container"==b.id&&50>b.offsetHeight)){if(!checkIsDisplayed(a,b.parentNode,c+1,d))return!1}else return!1}catch(g){}return!0}function countInputs(a,b){for(var c=0,d=a.getElementsByTagName("INPUT"),f=0;f<d.length;f++){if(100<f)return c+(d.length-f);b&&"password"!=d[f].type||checkIsDisplayed(a,d[f],0)&&c++}return c}
function getAbsolutePos(a,b){g_ctr_getAbsPos++;if(null!=b){if("undefined"==typeof b.getBoundingClientRect)return null;var c=b.getBoundingClientRect(),d,f;d="undefined"==typeof c.width?c.right-c.left:c.width;f="undefined"==typeof c.height?c.bottom-c.top:c.height;var e=null;"undefined"!=typeof a.body?e=a.body:a.getElementById("main")&&(e=a.getElementById("main"));var g;"undefined"==typeof a.g_posbodyrect_cache?(g=e.getBoundingClientRect(),a.g_posbodyrect_cache=g):g=a.g_posbodyrect_cache;var h=0;if("undefined"==
typeof a.g_posbodystyle_cache){var k="undefined"!=typeof window&&window?window:a.defaultView,e="undefined"!=typeof k.getComputedStyle?k.getComputedStyle(e,null):e.currentStyle;a.g_posbodystyle_cache=e}else e=a.g_posbodystyle_cache;"relative"==e.position&&(h=g.left);e="undefined"!=typeof window&&window?window:a.defaultView;"pageXOffset"in e?(g=e.pageXOffset,e=e.pageYOffset):(e=1,g&&(e=Math.round(100*((g.right-g.left)/a.body.offsetWidth))/100),g=Math.round(a.documentElement.scrollLeft/e),e=Math.round(a.documentElement.scrollTop/
e));return{left:c.left+g-h,top:c.top+e-0,width:d,height:f}}return null}
function createPopupFill(a,b){if(do_experimental_popupfill){var c,d,f,e="",g,h=0,k=0;popup_show_menu_expand_visual_cue&&(k=16);var l={};"undefined"!=typeof b.favicons&&(l=LPJSON.parse(b.favicons));e="<div id='popupcontainer'><table id='lptabpopup'>\n";if("undefined"==typeof b.sites)d=0;else for(g in c=getAutoFillArray(a,LPJSON.parse(b.sites),!0),d=getcount(c),c.sort(function(a,b){sort_popupfill_bylasttouch(a,b)}),c)if(c.hasOwnProperty(g)&&null!=c[g]&&null!=c[g].useusername){f=c[g].useusername;0>=
f.length&&(f=c[g].name);var j=f,e=e+("<tr id='trpopuprow"+lp_ofa(g)+"' aid='"+lp_ofa(c[g].aid)+"' sitename='"+lp_ofa(c[g].name)+"' username='"+lp_ofa(c[g].useusername)+"' class='popuprow' >\n"),e=e+("<td id='tdpopuprow"+lp_ofa(g)+"' aid='"+lp_ofa(c[g].aid)+"'>\n");do_experimental_popupfill&&"undefined"!=typeof l[c[g].aid]&&(e+="<img src='"+l[c[g].aid]+"' style='padding:2px;'/>");e+="<span id='spanpopuprow"+lp_ofa(g)+'\' class="popcell shortenstr">';e+=lp_of(f,a);e+="</span>";popup_show_menu_expand_visual_cue&&
(e+=visual_cue_frag("expand",g));popup_show_sitename_suffix&&"undefined"!=c[g].name&&0<c[g].name.length&&(e+="<p class='subtext'>"+lp_of(c[g].name,a)+"</p>");e+="</td>\n";e+="</tr>\n";j=measureText(a,lp_of(j,a),null,"font-size: 14px;font-family: Helvetica,Arial,sans-serif;font-weight:bold;");j.width+20+k>h&&(h=j.width+20+k)}e+="</table>\n</div>";e+="<div id='popupcontainerff'>";e+="<table id='lptabpopupformfills' style='display:none'>\n";if("undefined"==typeof b.formfills)f=0;else{c=LPJSON.parse(b.formfills);
f=getcount(c);var m;for(m=0;1>=m;m++)for(g in c)if(c.hasOwnProperty(g)&&null!=c[g]&&null!=c[g].decprofilename&&null!=c[g].profiletype&&parseInt(c[g].profiletype)===m){j="";""!=c[g].ccnum&&0==c[g].profiletype&&(j="hascc='1' ");e+="<tr id='trpopupffrow"+lp_ofa(g)+"' ffid='"+lp_ofa(c[g].ffid)+"' profilename='"+lp_ofa(c[g].decprofilename)+"' formtype='"+m+"' "+j+" class='popuprow'>\n";e+="<td id='tdpopupffrow"+lp_ofa(g)+"' ffid='"+lp_ofa(c[g].ffid)+"'>\n";do_experimental_popupfill&&"undefined"!=typeof l[c[g].ffid]&&
(e+="<img src='"+l[c[g].ffid]+"' style='padding:2px;'/>");j=lp_of(c[g].decprofilename,a);e+="<span id='spanpopupffrow"+lp_ofa(g)+'\' class="popcell shortenstr">';e+=lp_of(c[g].decprofilename,a);if(g_creditcard_profile_annotate&&1==m)var n='<span class="cc">('+lpgs("Credit Card")+")</span>",e=e+n,j=j+n;e+="</span>";popup_show_menu_expand_visual_cue&&(e+=visual_cue_frag("expandff",g));e+="</td>\n";e+="</tr>\n";j=measureText(a,j,null,"font-size: 14px;font-family: Helvetica,Arial,sans-serif;font-weight:bold;");
j.width+20+k>h&&(h=j.width+20+k)}}g_do_icon_number_hint&&(g_icon_numbers.sites=d,g_icon_numbers.formfills=f);if(do_popup_actions)0<f&&(e+="<tr class='tablerow_sep'><td><hr/></td></tr>\n");else if(0>=d&&0>=f)return null;e+="</table>\n";e+="</div>";if(do_popup_actions)e+="<table id='lptabpopupnavbar' style='"+(g_hide_navbar?"display:none;height:0px;":"")+"'></table>";else if(0>=d&&0>=f)return null;300<h&&(h=300);g_popupfill_widest=h;return e}}
function measureText(a,b,c,d,f){g_ctr_measureText++;var e=measureTextCacheGet(a,b,d);if(null!=e)return g_ctr_measureText_cachehits++,e;g_ctr_measureText_cachemisses++;var e=a.createElement("span"),g=null;if(null==d&&null==c)return g;null==f&&(f=a.body);null==f&&(f=a.getElementById("hiddenel"));f&&(f.appendChild(e),null!=d&&(e.style.cssText=d),null!=c&&(e.style.fontSize=""+c+"px"),e.style.position="absolute",e.style.left="-1000px",e.style.top="-1000px",e.innerHTML=b,g={width:e.clientWidth,height:e.clientHeight},
measureTextCacheSet(a,b,d,g),f.removeChild(e));return g}function getAutoFillArray(a,b,c){var d=[];a=punycode.URLToASCII(a.location.href);lpcanonizeUrl(a);for(var f in b)if(!b[f].genpw||c)d[f]=b[f];return d}function is_your_popup_showing(a){if(null==a)return!1;a=a.getElementsByTagName("iframe");for(var b=0;b<a.length;b++)if(("function"!=typeof a.hasOwnProperty||a.hasOwnProperty(b))&&0==a[b].id.indexOf(MAGICIFRAME))return!0;return!1}
function dosavesiteicon(a){a=a?1:0;verbose_log("["+g_docnum+"]: dosavesiteicon() iframe? "+a);verbose_log("["+g_docnum+"]: current input form is "+g_popupfill_parent_last.form);var b=null!=g_popupfill_parent_last?g_popupfill_parent_last.form:null;if(null==b)g_isfirefox?LP.lpOpenEditWindow(0,!1,!1,null,!0):(verbose_log("["+g_docnum+"]: looking for orphaned INPUT elements"),b=LP_get_form_save_orphans(),b={url:punycode.URLToASCII(document.location.href),formdata2:b},sendBG({cmd:"savethesite",notificationdata:b,
iframe:a}));else{for(var b=b.elements,c=0,d=0,f=0,e=0;e<b.length;e++)if("FIELDSET"!=b.tagName){var g=b[e].type;"password"==g?d++:"text"==g||"tel"==g||"email"==g?c++:"textarea"==g&&f++}1==c&&1==d&&0==f?g_isfirefox?LP.lpOpenEditWindow(0):(b=LP_get_form_save(g_popupfill_parent_last.form),b={url:punycode.URLToASCII(document.location.href),formdata2:b},sendBG({cmd:"savethesite",notificationdata:b,iframe:a})):g_isfirefox?LP.lpOpenEditWindow(0,!1,!1,null,!0):(b=LP_get_form_save(g_popupfill_parent_last.form),
b={url:punycode.URLToASCII(document.location.href),formdata2:b},sendBG({cmd:"savethesite",notificationdata:b,iframe:a}))}}function lp_url_is_lastpass(a){if(null==a)return!1;var b="https://lastpass.com/";"undefined"!=typeof base_url&&(b=base_url);return 0==a.indexOf(b)||0==a.indexOf("https://lastpass.com/")?!0:"undefined"!=typeof g_loosebasematching?(a=lp_gettld_url(a),RegExp(a+"/$").test(base_url)):!1}
function setupIcons(a,b){if(do_experimental_popupfill){"undefined"!=typeof g_isie&&g_isie&&(g_popupfill_hint={},ie_setup_event_handlers(a));"undefined"!=typeof g_isfirefox&&g_isfirefox?(a.g_input_cnt=countInputs(a),a.g_did_setupInputObserver=!1):g_input_cnt=countInputs(a);var c="undefined"!=typeof g_isloggedin?g_isloggedin:lploggedin,d=!1;if(g_dologin_clickable||!g_dologin_clickable&&c)d=!0;try{if(lp_url_is_lastpass(punycode.URLToASCII(a.location.href))||0==a.location.href.indexOf("chrome://lastpass/")||
0==a.location.href.indexOf("about://")||0==a.location.href.indexOf("safari-extension://"))return!1}catch(f){return verbose_log("setupIcons() probably caught cross-domain error, abort : "+f.message),!1}if(d&&(b||checkForLoginForm(a)||checkDocumentForLoginOrphans(a)||checkForNonLoginForm(a)||checkForSignupForm(a)))c=lp_gettld_url(punycode.URLToASCII(a.location.href)),g_isfirefox||"undefined"!=typeof g_isie&&g_isie||sendBG({cmd:"getpopupfillsites",tld:c}),g_do_icon_number_hint&&(g_icon_number_overrides=
{sites:-1,formfills:-1}),("undefined"!=typeof window&&window?window:a.defaultView).setTimeout(function(){doc_create_clickable_icons(a,"",SHOULD_DO_ALWAYS,b)},50)}"function"==typeof setupInputObserver&&setupInputObserver(a)}var MAX_FORMS_TO_CHECK=20;function checkForLoginForm(a){lp_gettld_url(punycode.URLToASCII(a.location.href));for(var b=a.getElementsByTagName("form"),c=!1,d=0;d<b.length&&d<MAX_FORMS_TO_CHECK;d++){c=chk_form_has_password(a,b[d],!0);if(null==c)break;if(c)return c}return!1}
function checkForNonLoginForm(a){lp_gettld_url(punycode.URLToASCII(a.location.href));for(var b=a.getElementsByTagName("form"),c=!1,d=0;d<b.length&&d<MAX_FORMS_TO_CHECK;d++)if(c=chk_form_is_nonlogin_form(a,b[d]))return c;return!1}function checkForSignupForm(a){for(var b=a.getElementsByTagName("form"),c=!1,d=0;d<b.length&&d<MAX_FORMS_TO_CHECK;d++)if(c=chk_form_ask_generate(a,b[d]))return c;return!1}
function chk_form_has_password(a,b,c){if(null==a||null==b)return!1;var d=LP_getname(b,LP_GETNAME_FAVOR_ID_OVER_NAME),f=formcacheget(a,d,"is_login");if(null!=f)return g_ctr_formcache_hits++,f;g_ctr_formcache_misses++;var f=lp_gettld_url(punycode.URLToASCII(a.location.href)),e=!1,g=0,h=0;if(!checkIsDisplayed(a,b,0,f))return verbose_log("form is not visible: cannot be login form"),!1;var k=!1;b=b.elements;for(var l=0;l<b.length;l++){var j=b[l],e=!1;if("FIELDSET"!=j.tagName){if(g_aspx_hack&&(0===j.name.indexOf("ctl00$")||
0===j.name.indexOf("ctl00_"))&&!g_found_aspx)g_found_aspx=!0,verbose_log("detected ASP.NET form, relaxing login form detection");if(!0!=j.disabled){if("text"==j.type&&is_watermark(j.className)&&is_watermark_password(j))try{j.type="password",lpdbg("onload","switching field from text to password from chk_form_has_password")}catch(m){e=!0}if(!("text"==j.type&&(fieldIsDoublePassword(a,j)===DOUBLE_PW_VISIBLE||fieldIsDoublePassword(a,j)===DOUBLE_SECRET_PW_VISIBLE)))if("password"==j.type||e||"text"==j.type&&
fieldIsDoublePassword(a,j)===DOUBLE_TEXT_VISIBLE||"text"==j.type&&fieldIsDoublePassword(a,j)===DOUBLE_SECRET_TEXT_VISIBLE){if(!("facebook.com"==f&&"string"==typeof j.id&&j.id.match(/^[a-z0-9]{6}_\d{1,2}_ci_password$/)))if("tdbank.com"==f&&"string"==typeof j.name&&"user"==j.name)h++;else{if(g_fillaid&&c)return!0;if(lpIsVisible(j)){if(2<=++g)return formcacheset(a,d,"is_login",!1),verbose_log("Password Form detection: "+d+" has too many password fields; do not treat as login form [PW:"+g+"/NON:"+h+"]"),
null}else k=!0}}else if(("email"==j.type||"text"==j.type||"textarea"==j.type||"tel"==j.type||"url"==j.type)&&lpIsVisible(j))if(h++,g_aspx_hack&&5<h||!g_aspx_hack&&2<h)return formcacheset(a,d,"is_login",!1),verbose_log("Password Form detection: "+d+" has too many non-password fields; do not treat as login form [PW:"+g+"/NON:"+h+"]"),null}}}if(1==g)return verbose_log("Password Form detection: "+d+" is a login form, has only one passwd field"),formcacheset(a,d,"is_login",!0),!0;k||formcacheset(a,d,"is_login",
!1);return!1}
function LP_getElementByIdOrName(a,b){if(null==a||null==b||0==b.length)return null;var c=a.getElementById(b);if(null!=c)return c;c=a.getElementsByName(b);if(1==objectSize(c))return c[0];if(0==objectSize(c))return null;for(var d=[],f=0,e=-1,g=0;g<c.length;g++)d[g]=0,"INPUT"==c[g].tagName&&(d[g]+=20,"hidden"!=c[g].type&&(d[g]+=10)),null!=c[g].style&&"none"!=c[g].style.display&&checkIsDisplayed(a,c[g],0)&&(d[g]+=5),null!=c[g].style&&"hidden"!=c[g].style.visibility&&(d[g]+=3),d[g]>f&&(f=d[g],e=g);return 0<=
e?c[e]:null}
function isInputFieldPassword(a,b){if(null==a||null==b||"INPUT"!=b.tagName)return!1;var c=lp_gettld_url(punycode.URLToASCII(a.location.href)),d=!1;if("text"==b.type&&is_watermark(b.className)&&is_watermark_password(b))try{b.type="password"}catch(f){d=!0}return"text"==b.type&&(0==b.name.indexOf("pass")||0==b.name.toLowerCase().indexOf(lpgs("Password").toLowerCase()))?!0:"password"==b.type||d?"facebook.com"==c&&"string"==typeof b.id&&b.id.match(/^[a-z0-9]{6}_\d{1,2}_ci_password$/)||"tdbank.com"==c&&
"string"==typeof b.name&&"user"==b.name?!1:!0:!1}
function isEmptyObject(a){if("undefined"==typeof Object.keys){var b=Object,c=Object.prototype.hasOwnProperty,d=!{toString:null}.propertyIsEnumerable("toString"),f="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),e=f.length;b.keys=function(a){if("object"!==typeof a&&("function"!==typeof a||null===a))throw new TypeError("Object.keys called on non-object");var b=[],k;for(k in a)c.call(a,k)&&b.push(k);if(d)for(k=0;k<e;k++)c.call(a,f[k])&&b.push(f[k]);
return b}}return 0===Object.keys(a).length}function LP_getname(a,b){if("undefined"!=typeof a&&null!=a){if(b&&"string"==typeof a.id&&""!=a.id)return a.id;if("string"==typeof a.name&&""!=a.name)return a.name;if("string"==typeof a.id)return a.id}return""}
function getWindowWidth(a){g_ctr_getWW++;var b=a.innerWidth,c=a.document;a=null;"undefined"!=typeof c.body?a=c.body:c.getElementById("main")&&(a=c.getElementById("main"));var d=c.getElementById("_lpinvis");null==d&&(d=c.createElement("div"),d.id.left="_lpinvis",d.style.left="0px",d.style.right="0px",d.style.top="0px",d.style.height="0px",d.style.visibility="hidden",a.appendChild(d));var c="undefined"!=typeof window&&window?window:c.defaultView,f;f="undefined"!=typeof c.getComputedStyle?c.getComputedStyle(a):
a.currentStyle;c=parseInt(f.marginLeft);f=parseInt(f.marginRight);0<d.offsetWidth&&(b=0<c||0<f?d.offsetWidth+f+c:d.offsetWidth);a.removeChild(d);return b}
function checkDocumentForLoginOrphans(a){for(var b=[],c=[],d=[],f=0,e,g=["input"],h=0;h<g.length;h++)for(var k=a.getElementsByTagName(g[h]),l=0;l<k.length&&!(100<l);l++)if(checkIsDisplayed(a,k[l],0)){e=k[l];if(null!=e.id&&""!=e.id){var j=d[e.id];if(null==j)d[e.id]=!0;else continue}if(null!=e.name&&""!=e.name)if(j=c[e.name],null==j)c[e.name]=!0;else continue;if(lp_in_array(LP_getname(e,LP_GETNAME_FAVOR_ID_OVER_NAME),b))verbose_log("fieldname "+b[j]+" is blacklisted, skipping");else if(null==e.form&&
("password"==e.type||"text"==e.type&&fieldIsDoublePassword(a,e)===DOUBLE_TEXT_VISIBLE||"text"==e.type&&fieldIsDoublePassword(a,e)===DOUBLE_SECRET_TEXT_VISIBLE))f++,2<=f&&verbose_log("too many orphan password fields found")}return 1==f?(verbose_log("orphan login & password field found"),!0):!1}
function do_icon_mouseover(a,b){if(null==a||null==b)return!1;var c=a.getElementById(b+"_icon");if(g_use_grey_icons&&is_your_popup_showing(a))return null!=c&&(c.style.opacity="1",c.style.filter="alpha(opacity=100)"),!1;if(null!=c){var d=!0,f=a.getElementById(b);null!=f&&(f=f.getAttribute("intrinsic"),"formfills"==f?(c.src=ff_svg,c.setAttribute("onerror","this.removeAttribute('onerror'); this.src = '"+g_ff_ico+"';"),d=!1):"offersave"==f?d=!1:"generate"==f&&g_use_grey_icons&&(c.src=pw_svg,c.setAttribute("onerror",
"this.removeAttribute('onerror'); this.src = '"+g_pw_ico+"';"),d=!1));d&&(c.src=sites_svg,c.setAttribute("onerror","this.removeAttribute('onerror'); this.src = '"+g_sites_ico+"';"));c.style.opacity="1";c.style.filter="alpha(opacity=100)"}g_do_icon_number_hint&&(c=a.getElementById(b+"_numspan"),null!=c&&g_icon_shading&&(c.style.backgroundColor="#CCFF99"))}
function do_icon_mouseout(a,b){if(null==a||null==b)return!1;var c=a.getElementById(b+"_icon");if(g_use_grey_icons&&is_your_popup_showing(a))return null!=c&&(c.style.opacity="0.6"),!1;if(null!=c){var d=a.getElementById(b);if(null==d)return!1;d=d.getAttribute("intrinsic");if(null==d||""===d||"sites"!==d&&"formfills"!==d&&"generate"!==d&&"offersave"!==d)d="default";"default"==d||"sites"==d?(c.src=sites_svg,c.setAttribute("onerror","this.removeAttribute('onerror'); this.src = '"+g_sites_ico+"';"),c.style.opacity=
"0.6",c.style.filter="alpha(opacity=60)"):"formfills"==d?(c.src=ff_svg,c.setAttribute("onerror","this.removeAttribute('onerror'); this.src = '"+g_ff_ico+"';"),c.style.opacity="0.6",c.style.filter="alpha(opacity=60)"):"generate"==d&&(c.src=pw_svg,c.setAttribute("onerror","this.removeAttribute('onerror'); this.src = '"+g_pw_ico+"';"),c.style.opacity="0.6",c.style.filter="alpha(opacity=60)")}g_do_icon_number_hint&&(c=a.getElementById(b+"_numspan"),null!=c&&(g_icon_shading?c.style.backgroundColor="#FFFFFF":
c.style.display=""))}function do_icon_number_hint(a,b){g_icon_number_overrides.sites=null==a||"undefined"!=typeof parseInt&&0>parseInt(a)||"undefined"==typeof parseInt&&0>a?-1:a;g_icon_number_overrides.formfills=null==b||"undefined"!=typeof parseInt&&0>parseInt(b)||"undefined"==typeof parseInt&&0>b?-1:b}
function do_save_site_success_msg(a){if(g_show_save_success_msg){var b=a.createElement("div");b.id="__lpsavemsgdiv";var c=getWindowWidth(window)-parseInt("210px")-30+"px",d=lpgs("You have saved your password to your LastPass Vault.");b.innerHTML=d;b.style.cssText="position:absolute !important; visibility:visible !important; z-index:"+CLICKABLE_ICON_ZINDEX+" !important; border-style:solid !important; border-width:1px !important; border-color:#4c4c4c !important; font-size:14px; font-family: Arial,Helvetica,sans-serif; width: 210px !important; top:25px !important; left:"+
c+" !important; background-color: #e6e6e6; margin: 4px !important; border-radius: 4px; padding: 5px 5px 5px 15px !important; background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3BpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMi1jMDAxIDYzLjEzOTQzOSwgMjAxMC8xMC8xMi0wODo0NTozMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpDQ0JFNTgxNzA4MjA2ODExOTJCMEZBNzdDQkU2Qjg4RiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1RTA4N0Y4OEZCQUYxMUUyOTAyNEMwRUQyN0ZDRTk1QyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1RTA4N0Y4N0ZCQUYxMUUyOTAyNEMwRUQyN0ZDRTk1QyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgRWxlbWVudHMgMTEuMCBNYWNpbnRvc2giPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoyMEEzMzFENkUxMjA2ODExOTJCMEZBNzdDQkU2Qjg4RiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDQ0JFNTgxNzA4MjA2ODExOTJCMEZBNzdDQkU2Qjg4RiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqEZ7U4AAAAwUExURfL6+uHMzaoWLIoDFKVJJ2oEFsQaK7cCHMtfaNWrEcFJOsg2PsqnqdWGi584RAAAAIK7gZ4AAAAQdFJOU////////////////////wDgI10ZAAAAWUlEQVR42jzMUQ4AMQQEUKpoFnX/2+403exEZN4H1DHsZjQ9/kcOgsN4fVhURXVhxkRsBkxnPmCOg8xEzRyAuAOJEwVk0cIPAbbIriG5D6Zi31Fq/dOvAAMADDMDTO9yI2MAAAAASUVORK5CYII=); background-repeat:no-repeat; background-position: left top;background-attachment: scroll;";
"undefined"!=typeof a.body?a.body.appendChild(b):a.getElementById("main")&&a.getElementById("main").appendChild(b);setTimeout(function(){destroy_save_site_success_msg(a,b.id,0);return!1},1500)}return!1}
function destroy_save_site_success_msg(a,b,c){var d=a.getElementById(b);if(null!=d){if(null===c)return d.parentNode.removeChild(d),!1;c<FADE_MAXSTATES?("undefined"!=typeof d.style.opacity?d.style.opacity=(100-100/FADE_MAXSTATES*(c+1))/100:d.style.filter="alpha(opacity="+(100-20*(c+1))+")",c++,setTimeout(function(){destroy_save_site_success_msg(a,d.id,c);return!1},10)):d.parentNode.removeChild(d)}return!1}
function closepopupfills(a){if(do_experimental_popupfill){var b,c=a.getElementsByTagName("iframe"),d=[];for(b=0;b<c.length;b++)d[b]=c[b];for(b=0;b<c.length;b++){var f=d[b];if("undefined"!=typeof f.id&&null!=f.id){var e=MAGICIFRAME;0==f.id.indexOf(e)&&(g_use_grey_icons&&(e=f.id.substr(e.length),null!=a.getElementById(e)&&revert_clickable_icon(a,e)),f.parentNode&&f.parentNode.removeChild(f))}}"undefined"!=typeof g_isloggedin&&g_isie&&do_icon_number_hint(-1,-1);if(g_double_password_hack||g_double_secret_password_hack)if(g_double_secret_password_hack=
g_double_password_hack=!1,g_input_cnt=0,g_isfirefox){for(a=LP.getBrowser().contentWindow;null!=a.top&&a.top!=a;)a=a.top;a=lpGetBrowserForDocument(a.document);LP.checkShouldRecheck(a)}else checkShouldRecheck();g_popupfill_parent_last=g_popupfill_parent;g_popupfill_parent=null;g_minheight_override=g_minwidth_override=g_popupfill_iframe_height_save=g_popupfill_iframe_width_save=g_popupfill_ctr=0}}
function popupfill_resize(){if(do_experimental_popupfill){var a="undefined"!=typeof document&&document?document:LP.getBrowser().contentDocument;null==a&&"undefined"!=typeof g_isfirefox&&g_isfirefox?end_weasel():(relocate_popupfill_clickables(a),relocate_popupfill_iframes(a),!1==g_weaseled&&weasel(100),g_weaseled=!0)}}var MSGDIVID="__lpsuggestmsgdiv";
function do_save_suggest_msg(a,b){var c,d;if(null!=b&&(!("undefined"!=typeof g_icon_numbers&&"undefined"!=typeof g_icon_numbers.sites&&1<=g_icon_numbers.sites)&&!g_save_suggest_msg_seen)&&(g_save_suggest_msg_seen=!0,!is_your_popup_showing(b)&&g_isloggedin)){if(g_save_suggest_msg){if(null==a)return;LP_getname(a,LP_GETNAME_FAVOR_ID_OVER_NAME);if(null!=b.getElementById(MSGDIVID))return;var f=b.createElement("div");f.id=MSGDIVID;c=getAbsolutePos(b,a);null!=c&&0<c.left&&0<c.top?(d=c.left+20+"px",c=c.top+
c.height+20+"px"):(d=getWindowWidth(window),d=d-parseInt("200px")-10+"px",c="40px");f.style.cssText="position:absolute !important; visibility:visible !important; z-index:"+CLICKABLE_ICON_ZINDEX+" !important; border-style:solid !important; border-width:1px !important; border-color:#000 !important; font-size:14px; font-family: Helvetica Neue,Helvetica,Arial,sans-serif; width: 200px !important; top:"+c+" !important; left:"+d+" !important; background-color: #22d222; margin: 2px !important; padding:3px !important;";
c=b.createElement("DIV");c.id="__lpsuggestitle";f.appendChild(c);d=b.createElement("SPAN");d.id="__lpsuggestcancel";d.style.cssText="visibility: visible !important; border:0px !important; float:right !important; vertical-align:top !important; ";c.appendChild(d);c=b.createElement("IMG");c.id="__lpsuggestimgcancel";c.setAttribute("alt",lpgs("Cancel"));c.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowQ0NBMTdFRjIwMjA2ODExOEYwMEFFMDM3RkVEMDZBRSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpGOTc5RjY0QUExQ0IxMUUwQTAzMEEwMzFBMEMyRkNFRSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpGOTc5RjY0OUExQ0IxMUUwQTAzMEEwMzFBMEMyRkNFRSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1LjEgTWFjaW50b3NoIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MEZDQTE3RUYyMDIwNjgxMThGMDBBRTAzN0ZFRDA2QUUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MENDQTE3RUYyMDIwNjgxMThGMDBBRTAzN0ZFRDA2QUUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6IFgekAAACC0lEQVR42rTVTUhUURjGcUejKDMDEUqxTS4MgrCPRUOLIJKEogwm+pCihS0ibZeBi1YtQnARlZJUiFLI5EaYFknpQmhTUBRJmR8EEu6CQg2t8X/wGXk7nTua4IHfDNy555nz3vNxY+l0Omc12hr3kUwmQ78VYB+OYxdK8ANf8QIpjIU6JhKJheBAK8N1nEQx8sxvu3EIF3ELPfjtB+QGQo/iFS5jixdqq3F/0I0OFC0VfAxdKP2Px3kOndgYFbwDj1C4grmqRnMoOIabpqQ5PEQLZgNBH3EDr821Whz+a1XQ4jhibnKTcQ9vMIrbZhAfcAIjqm6vrrtHcQEDbjC55tmuN8HrFOZWx1004A8+oUahp3HJq+Sg+iyOuCJQrqvisVuWCv+Jd/iCs7iPfK9PqYJHMyPeHDEpB9CLci2rtziPtkBophVHrWO/uQmd9h5TQZb70zb4e8RNQ1pKE/rejnZtntmIPpM2eChww3vN/mdN1FPttG1oxVX88vp8k8XglFfuDK4otFZregP24IkmqFXXbXuJcRs8iH5zw1pUaVTt3lKMa+SntFtzzKbqzBxI9nRrRCW26g+bskzQfrHNrZS+0FnhdlQ9plZwVjzDNW2i4OnWoxJHlhnoyn6gyZ1e6jxOmdNqPEvgc5xBnd4s/76aAm1Ypd3BTtmkUse0A4e1zYMttlov03kBBgDmGHIa6CiubAAAAABJRU5ErkJggg==";
d.appendChild(c);c=b.createElement("DIV");c.id="__lpsuggestbody";c.innerText=lpgs("Save your password to your LastPass Vault?");f.appendChild(c);var e=MAGIC+LP_getname(a,LP_GETNAME_FAVOR_ID_OVER_NAME);addEventHandler(c,"click",function(){setTimeout(function(){popupfilltoggle(b,e,a,!1,FORCE_SHOW_NOHITS,1);destroy_save_suggest_msg(b,MSGDIVID,null);savesite_popupaction_iframe(b,event);return!1},0);return!1});addEventHandler(d,"click",function(){setTimeout(function(){destroy_save_suggest_msg(b,MSGDIVID,
null);return!1},0);return!1});"undefined"!=typeof b.body?b.body.appendChild(f):b.getElementById("main")&&b.getElementById("main").appendChild(f);setTimeout(function(){destroy_save_suggest_msg(b,MSGDIVID,0);return!1},5E3)}return!1}}
function destroy_save_suggest_msg(a,b,c){var d=a.getElementById(b);if(null!=d){if(null===c)return d.parentNode.removeChild(d),!1;c<FADE_MAXSTATES?("undefined"!=typeof d.style.opacity?d.style.opacity=(100-100/FADE_MAXSTATES*(c+1))/100:d.style.filter="alpha(opacity="+(100-20*(c+1))+")",c++,setTimeout(function(){destroy_save_suggest_msg(a,d.id,c);return!1},10)):d.parentNode.removeChild(d)}return!1}
function measureTextCacheSet(a,b,c,d){if(null==a||null==b||null==c||0===b.length||0===c.length||null==d)return null;"undefined"==typeof a.g_measureText_cache&&(a.g_measureText_cache=[]);null==a.g_measureText_cache[c]&&(a.g_measureText_cache[c]={});a.g_measureText_cache[c][b]=d;return!0}
function measureTextCacheGet(a,b,c){return null==a||(null==b||null==c||0===b.length||0===c.length)||"undefined"==typeof a.g_measureText_cache?null:null!=a.g_measureText_cache[c]&&null!=a.g_measureText_cache[c][b]?a.g_measureText_cache[c][b]:null}
function chk_form_changepw(a,b){if(null==a||null==b)return!1;for(var c=lpCheckCurrentPWField(b),d=!1,f=null,e=null,g=1;2>=g;g++){var d=!1,f=e=null,h=-1;if(1==g){if(c)for(var k=0;k<b.elements.length;k++)if(b.elements[k]==c){h=k+1;break}}else h=0;if(-1!=h){for(k=h;k<b.elements.length;k++)if(h=b.elements[k],"FIELDSET"!=h.tagName)if(isInputFieldPassword(a,h)){if(d||!f||!e)if(e=f,f=h,d&&f&&e)break;d=!0}else d=!1;if(f&&e)break}}return null!=f&&null!=e&&null!=c?!0:!1}
function change_clickable_icon_to_cancel(a,b){if(null!=a&&g_use_grey_icons){var c=a.getElementById(b+"_icon");if(null!=c){if(null==a.getElementById(b))return!1;c.src=close_svg;c.setAttribute("onerror","this.removeAttribute('onerror'); this.src = '"+g_close_ico+"';");c.style.opacity="0.6";c.style.filter="alpha(opacity=60)"}}}
function revert_clickable_icon(a,b){if(null!=a&&g_use_grey_icons){var c=a.getElementById(b+"_icon");if(null!=c){var d=a.getElementById(b);if(null==d)return!1;d=d.getAttribute("intrinsic");if(null==d||""===d||"sites"!==d&&"formfills"!==d&&"generate"!==d)d="default";"default"==d||"sites"==d?(c.src=sites_svg,c.setAttribute("onerror","this.removeAttribute('onerror'); this.src = '"+g_sites_ico+"';"),c.style.opacity="0.6",c.style.filter="alpha(opacity=60)"):"formfills"==d?(c.src=ff_svg,c.setAttribute("onerror",
"this.removeAttribute('onerror'); this.src = '"+g_ff_ico+"';"),c.style.opacity="0.6",c.style.filter="alpha(opacity=60)"):"generate"==d&&(c.src=pw_svg,c.setAttribute("onerror","this.removeAttribute('onerror'); this.src = '"+g_pw_ico+"';"),c.style.opacity="0.6",c.style.filter="alpha(opacity=60)")}}}
function visual_cue_frag(a,b){var c="";if(null===a||0>=a.length)return c;popup_show_menu_expand_visual_cue&&(c="",g_visual_cue_on_hover&&(c=" style='display:none;'"),c="<span id='"+a+lp_ofa(b)+"' expander='true' class='expander' "+c+"><img id='"+a+"img"+lp_ofa(b)+"' src='arrow.png' />  </span>\n");return c}
function conditional_create_popup(a,b,c){if(null==a||null==b||!g_clickable_input)return!1;if(!("undefined"!=typeof g_isloggedin?g_isloggedin:lploggedin))return!0;var d=b.form,f=form_get_username(a,d),e=form_get_password(a,d);null==d&&checkDocumentForLoginOrphans(a)&&(f=doc_get_orphan_username(a),e=doc_get_orphan_password(a));if(!(null==f||null==e)){var g=checkDocumentForLoginOrphans(a),g=chk_form_has_password(a,d)||g,h=chk_form_is_nonlogin_form(a,d),d=chk_form_ask_generate(a,d),k=MAGIC+LP_getname(b,
LP_GETNAME_FAVOR_ID_OVER_NAME),l=a.getElementById(k);if("undefined"!=typeof f.value&&0<f.value.length&&"undefined"!=typeof e.value&&0<e.value.length&&(g||d)&&!h){if(null!=l)return g_popup_active_username=f,g_popup_active_password=e,popupfilltoggle(a,k,b,NO_FORCE_GENERATE,c),!0}else if(h||d)if(isInputFieldPassword(a,b))d&&g_aspx_hack&&g_found_aspx&&!isContigPW(a,b.form,b)?null!=l&&(g_popup_active_username=f,g_popup_active_password=e,popupfilltoggle(a,k,b,NO_FORCE_GENERATE,FORCE_SHOW_NOHITS)):null!=
l&&(g_popup_active_username=f,g_popup_active_password=e,popupfilltoggle(a,k,b,FORCE_OFFER_GENERATE,FORCE_SHOW_NOHITS));else if(looksLikeUsername(b)||looksLikeEmail(a,b))g_popup_active_username=f,g_popup_active_password=e,popupfilltoggle(a,k,b,NO_FORCE_GENERATE,FORCE_SHOW_NOHITS)}return!1}
function form_get_password(a,b){if(null==a||null==b)return null;g_ctr_form_get_password_N++;for(var c=b.elements,d=0;d<c.length;d++){var f=c[d];if("FIELDSET"!=f.tagName&&checkIsDisplayed(a,f,0)&&isInputFieldPassword(a,f))return f}return null}
function form_get_username(a,b){if(null==a||null==b)return null;g_ctr_form_get_username_M++;for(var c=b.elements,d=0;d<c.length;d++){var f=c[d];if("FIELDSET"!=f.tagName&&checkIsDisplayed(a,f,0)&&("text"==f.type||"email"==f.type||looksLikeUsername(f)))return f}return null}
function doc_get_orphan_username(a){if(null==a)return null;g_ctr_orphan_get_username_P++;for(var b=["input"],c=0;c<b.length;c++)for(var d=a.getElementsByTagName(b[c]),f=0;f<d.length;f++){if(100<f)return null;var e=d[f];if(null==e.form&&checkIsDisplayed(a,e,0)&&("text"==e.type||"email"==e.type||looksLikeUsername(e)))return e}return null}
function doc_get_orphan_password(a){if(null==a)return null;g_ctr_orphan_get_password_Q++;for(var b=["input"],c=0;c<b.length;c++)for(var d=a.getElementsByTagName(b[c]),f=0;f<d.length;f++){if(100<f)return null;var e=d[f];if(null==e.form&&checkIsDisplayed(a,e,0)&&isInputFieldPassword(a,e))return e}return null}
function set_active_username_password(a,b){if(null==a||null==b)g_popup_active_password=g_popup_active_username=null;else{var c=form_get_username(a,b),d=form_get_password(a,b);null==b&&checkDocumentForLoginOrphans(a)&&(c=doc_get_orphan_username(a),d=doc_get_orphan_password(a));g_popup_active_username=c;g_popup_active_password=d}}function looksLikeEmail(a,b){return null==a||null==b||!("text"==b.type||"email"==b.type)?!1:"email"==b.type||RegExp(lpgs("ff_email_regexp"),"i").exec(b.name)?!0:!1}
function is_search_field(a,b,c){if(null==a||null==b||"INPUT"!=b.tagName)return!1;null===c&&(c=!1);a=b.form;var d=[];null!=a&&(d=a.elements);LP_getname(b,LP_GETNAME_FAVOR_ID_OVER_NAME);return(null!=b.className&&0<=b.className.toLowerCase().indexOf("search")||0<=b.className.toLowerCase().indexOf("srch")||0<=b.id.toLowerCase().indexOf("search")||0<=b.id.toLowerCase().indexOf("srch")||0<=b.name.toLowerCase().indexOf("search")||0<=b.name.toLowerCase().indexOf("srch"))&&0>b.name.toLowerCase().indexOf("user")&&
0>b.name.toLowerCase().indexOf("login")&&0>b.id.toLowerCase().indexOf("user")&&0>b.id.toLowerCase().indexOf("login")&&(c||5>d.length)?!0:!1}
function is_search_form(a,b){if(null==a||null==b||"FORM"!=b.tagName)return!1;var c=LP_getname(b,LP_GETNAME_FAVOR_ID_OVER_NAME);return null!=b.id&&0<b.id.length&&(0<=b.id.toLowerCase().indexOf("search")||0<=b.id.toLowerCase().indexOf("srch"))||null!=b.name&&0<b.name.length&&(0<=b.name.toLowerCase().indexOf("search")||0<=b.name.toLowerCase().indexOf("srch"))?(verbose_log("form "+c+" appears to be a search field based on name/id "),!0):!1}
function pickFormName(a){var b="none";if(null!=a&&(b=LP_getname(a,LP_GETNAME_FAVOR_ID_OVER_NAME),null==b||0>=b.length))b=null!=a.action&&0<=a.action.length||null!=a.className&&0<=a.className.length?"FF"+a.action+a.className:"none";return b}
function looksLikeUsername(a,b){null===b&&(b=!1);g_ctr_looksLikeUsername_R++;if(!b&&"text"!=a.type&&"email"!=a.type)return!1;var c=RegExp(lpgs("ff_username_regexp"),"i");if(c.exec(a.name))return!0;var d=a.getAttribute("placeholder");if(null!=d&&0<=d.indexOf("Login"))return!0;d=RegExp(lpgs("ff_loginform_regexp"),"i");if(a.form)for(var f=a.form.elements,e=0;e<f.length;e++)if("submit"==f[e].type&&(f[e].name&&c.exec(f[e].name)||d.exec(f[e].name)))return!0;c=/^id$|.*-id|online.*id$/;return c.exec(a.name)||
g_is_specialsite&&(c=RegExp(lpgs("ff_bankacctnum_regexp"),"i"),c.exec(a.name))?!0:!1}function formHasUsernameField(a){if(a=a.form){a=a.elements;for(var b=0;b<a.length;b++){var c=a[b];if("text"==c.type||"email"==c.type)return!0}}return!1}var DOUBLE_TEXT_VISIBLE=1,DOUBLE_PW_VISIBLE=2,DOUBLE_SECRET_TEXT_VISIBLE=3,DOUBLE_SECRET_PW_VISIBLE=4,NOT_DOUBLE_PW=0;
function fieldIsDoublePassword(a,b){null==a&&(a=document);if(null==b)return NOT_DOUBLE_PW;var c=null,d=null,f=null,e=null;if("undefined"!=typeof b.previousElementSibling)c=b.previousElementSibling;else if((c=b.previousSibling)&&null!=c.nodeType&&3==c.nodeType)c=c.previousSibling;if("undefined"!=typeof b.nextElementSibling)d=b.nextElementSibling;else if((d=b.nextSibling)&&null!=d.nodeType&&3==d.nodeType)d=d.nextSibling;c&&"INPUT"!=c.tagName&&(c=null);d&&"INPUT"!=d.tagName&&(d=null);if(c){if("undefined"!=
typeof c.previousElementSibling)f=c.previousElementSibling;else if((f=c.previousSibling)&&null!=f.nodeType&&3==f.nodeType)f=f.previousSibling;f&&"INPUT"!=f.tagName&&(f=null)}if(d){if("undefined"!=typeof d.nextElementSibling)e=d.nextElementSibling;else if((e=d.nextSibling)&&null!=e.nodeType&&3==e.nodeType)e=e.nextSibling;e&&"INPUT"!=e.tagName&&(e=null)}return"password"==b.type&&!checkIsDisplayed(a,b,-1)&&c&&"text"==c.type&&!checkIsDisplayed(a,c,-1)&&d&&"text"==d.type&&checkIsDisplayed(a,d,-1)&&e&&
"text"==e.type&&checkIsDisplayed(a,e,-1)||"text"==b.type&&checkIsDisplayed(a,b,-1)&&c&&"text"==c.type&&checkIsDisplayed(a,c,-1)&&f&&"password"==f.type&&!checkIsDisplayed(a,f,-1)?(verbose_log("field "+LP_getname(b,LP_GETNAME_FAVOR_ID_OVER_NAME)+" needs double secret password hack"),g_double_secret_password_hack=!0,DOUBLE_SECRET_TEXT_VISIBLE):"password"==b.type&&checkIsDisplayed(a,b,-1)&&c&&"text"==c.type&&!checkIsDisplayed(a,c,-1)||"text"==b.type&&!checkIsDisplayed(a,b,-1)&&d&&"password"==d.type&&
checkIsDisplayed(a,d,-1)?(verbose_log("field "+LP_getname(b,LP_GETNAME_FAVOR_ID_OVER_NAME)+" needs double password hack"),g_double_password_hack=!0,DOUBLE_PW_VISIBLE):"password"==b.type&&!checkIsDisplayed(a,b,-1)&&c&&"text"==c.type&&checkIsDisplayed(a,c,-1)||"text"==b.type&&checkIsDisplayed(a,b,-1)&&d&&"password"==d.type&&!checkIsDisplayed(a,d,-1)?(verbose_log("field "+LP_getname(b,LP_GETNAME_FAVOR_ID_OVER_NAME)+" needs double password hack"),g_double_password_hack=!0,DOUBLE_TEXT_VISIBLE):NOT_DOUBLE_PW}
var g_did_setupInputObserver=!1;
function setupInputObserver(a){null==a&&(a=document);var b;if(b=do_experimental_popupfill)b="undefined"!=typeof g_isfirefox&&g_isfirefox?a?a.g_did_setupInputObserver:null:g_did_setupInputObserver,b=!b;if(b){b="undefined"!=typeof window&&window?window:a.defaultView;var c=null;if("undefined"!=typeof WebKitMutationObserver)c=new WebKitMutationObserver(function(a){mutationObserverCallBack(a)});else if("undefined"!=typeof MutationObserver)c=new MutationObserver(function(a){mutationObserverCallBack(a)});else if("undefined"!=
typeof b.MutationObserver)c=new b.MutationObserver(function(a){mutationObserverCallBack(a)});else return;null!=c&&(c.observe(a,{childList:!0,subtree:!0}),"undefined"!=typeof g_isfirefox&&g_isfirefox?a&&(a.g_did_setupInputObserver=!0):g_did_setupInputObserver=!0)}}
function mutationObserverCallBack(a){g_ctr_mutation_observer++;var b=!1;a.forEach(function(a){g_isfirefox&&LP.getBrowser();var c;if(!1==b)for(c=0;c<a.addedNodes.length;c++)if("INPUT"==a.addedNodes[c].tagName){b=!0;break}if(!1==b)for(c=0;c<a.removedNodes.length;c++)if("INPUT"==a.removedNodes[c].tagName){b=!0;break}});a=(new Date).getTime();if(b){if(g_isfirefox){for(var c=LP.getBrowser().contentWindow;null!=c.top&&c.top!=c;)c=c.top;c=lpGetBrowserForDocument(c.document);LP.checkShouldRecheck(c)}else checkShouldRecheck();
g_last_recheck=a}}
function enableScrollOnIframe(a,b){null==b&&(b=document);var c=b.getElementsByTagName("IFRAME"),d,f=null;if(null!=c&&0<c.length)for(d=0;d<c.length;d++){var f=c[d],e=a.replace(/^(https:|http:)/,"");verbose_log("checking iframe src="+f.src+" passed href="+a);if(f.src==a||0<f.src.indexOf(a)||0<f.src.indexOf(e))"undefined"!=typeof g_isie&&g_isie?(f.setAttribute("scrolling","auto"),f.style.overflow="visible",f.style.maxHeight="none"):(f.setAttribute("scrolling","auto"),f.style.overflow="auto"),verbose_log("enabling scroll on iframe to "+
a)}}function enableScrollWithinIframe(a,b){null==a&&(a=document);null==b&&(b=window);is_your_popup_showing(a)&&b.self!=b.top&&(verbose_log("enabling scroll on body of iframe"),g_isfirefox?a.body.style.overflow="auto":g_isie?(a.body.style.overflow="visible",a.body.setAttribute("scroll","auto")):a.body.style.overflow="auto")}
function destroy_clickables(a){do_experimental_popupfill&&(a||(a=document),null!=a&&(end_weasel(),closepopupfills(a),closeclickableicons(a),g_save_suggest_msg&&setTimeout(function(){destroy_save_suggest_msg(a,MSGDIVID,null);return!1},0)))}
function closeclickableicons(a){if(do_experimental_popupfill&&(a||(a=document),null!=a)){"undefined"!=typeof g_isfirefox&&g_isfirefox&&verbose_log("closeclickableicons called on "+a.location.href);var b;"undefined"!=typeof g_isfirefox&&g_isfirefox?(null==a.g_popup_divs&&a.g_popup_divs=={},b=a.g_popup_divs):b=g_popup_divs;for(var c in b)if(b.hasOwnProperty(c)){var d=a.getElementById(b[c]);if(null!=d){if(g_do_icon_number_hint){var f=a.getElementById(d.id+"_numspan");null!=f&&f.parentNode.removeChild(f)}d.parentNode.removeChild(d)}}"undefined"!=
typeof g_isfirefox&&g_isfirefox?a.g_popup_divs={}:g_popup_divs={}}}function sort_popupfill_bylasttouch(a,b){return(null==b||null==b.last_touch||0==b.last_touch?1073741824:b.last_touch)-(null==a||null==a.last_touch||0==a.last_touch?1073741824:a.last_touch)}
function ContigPWHack(a,b,c){null===a&&(a=document);if(null===a||"undefined"==typeof a.getElementsByTagName)return!1;b=lpCountInputFields(b);if((3==b.passwordvisible||4==b.passwordvisible)&&!0===b.passwordsContiguous){var d=a.getElementsByTagName("input");for(b=0;b<d.length&&!(100<b);b++)if(d[b]==c){if("undefined"!=typeof d[b+1]&&"password"==d[b+1].type&&"undefined"!=typeof d[b+2]&&"password"==d[b+2].type&&checkIsDisplayed(a,d[b],-1)&&checkIsDisplayed(a,d[b+1],-1)&&checkIsDisplayed(a,d[b+2],-1))return!0;
break}}return!1}function isContigPW(a,b,c){null==b&&(b=a);var d=b.getElementsByTagName("input");for(b=0;b<d.length;b++)if(d[b]==c&&"password"==d[b].type){if("undefined"!=typeof d[b+1]&&"password"==d[b+1].type&&checkIsDisplayed(a,d[b],-1)&&checkIsDisplayed(a,d[b+1],-1)||"undefined"!=typeof d[b-1]&&"password"==d[b-1].type&&checkIsDisplayed(a,d[b],-1)&&checkIsDisplayed(a,d[b-1],-1))return!0;break}return!1}
function get_prev_field(a,b){if("undefined"!=typeof b.previousElementSibling)prev_field=b.previousElementSibling;else if((prev_field=b.previousSibling)&&null!=prev_field.nodeType&&prev_field.nodeType==TEXT_NODE)prev_field=prev_field.previousSibling}function get_next_field(a,b){if("undefined"!=typeof b.nextElementSibling)next_field=b.nextElementSibling;else if((next_field=b.nextSibling)&&null!=next_field.nodeType&&next_field.nodeType==TEXT_NODE)next_field=next_field.nextSibling}
function is_modifier_key(a){if("undefined"!=typeof KeyEvent){if(a==KeyEvent.DOM_VK_ALT||a==KeyEvent.DOM_VK_SHIFT||a==KeyEvent.DOM_VK_CONTROL||a==KeyEvent.DOM_VK_WIN||a==KeyEvent.DOM_VK_META)return!0}else if(16==a||17==a||18==a||91==a||92==a||224==a)return!0;return!1};
