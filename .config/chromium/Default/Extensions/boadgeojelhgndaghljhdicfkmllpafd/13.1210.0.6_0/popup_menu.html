<!DOCTYPE html>
<html ng-app="popupMenu" ng-csp xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Chromecast Extension Popup</title>
<link rel="stylesheet" type="text/css" href="popup_menu_css.css" />
<link href="http://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css">
<script type="text/javascript" src="angular.js"></script>
<script type="text/javascript" src="angular_sanitize.js"></script>
<script type="text/javascript" src="popup_menu_script.js"></script>
</head>
<body id="popup" ng-controller="PopupMenuCtrl" ng-switch on="component">
  <!--waiting-->
  <div ng-switch-when="waiting" class="waiting">
    <img class="waiting-icon" src="data/spinner.png">
    <span class="waiting-text"><b>{{waitingTitle}}</b></span>
  </div>

  <!--cast app notification-->
  <div ng-switch-when="cast_app_notification">
    <div class="cast-app-notification-header">
      <angular-message desc="Header that the page supports high-quality video" key="cast_popup_high_quality_video">
        High quality casting
      </angular-message>
    </div>
    <div class="cast-app-notification-text">
      <angular-message desc="Details about how the page supports high-quality video" key="cast_popup_high_quality_video_details">
        Get the best casting experience by clicking on the cast icon in this site.
      </angular-message>
    </div>
    <img class="cast-app-image" src="data/cast_app.png">
    <table class="buttons-50pct">
      <tbody>
        <tr>
          <td class="button-action button" ng-click="dismissCastAppNotification()">
            <angular-message desc="Button that the user understands that the page supports high-quality video" key="cast_popup_high_quality_video_dismiss">
              Got it!
            </angular-message>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!--receiver list-->
  <div ng-switch-when="receiver_picker">
    <div class="transparent-overlay" ng-show="sharedState.selectingCaptureSurface" ng-click="sharedState.selectingCaptureSurface = false"></div>
    <div class="no-device-header" ng-hide="receiverActs.length > 0 || init">
      <div>
        <angular-message desc="Label that there were no Cast devices found" key="donge_no_cast_device_found">
          No Cast devices found.
        </angular-message>
        <span class="learn-more-link" ng-click="onClickDeviceMissing()">
          <angular-message desc="Link to get help about finding the Cast device" key="cast_popup_device_missing">
            (Device missing?)
          </angular-message>
        </span>
      </div>
    </div>
    <div class="device-selection-header" ng-show="receiverActs.length > 0">
      {{receiverListTitle}}
      <div class="beta-label"></div>
      <div ng-class="{'drop-down':true, 'menu-button':true, showing:sharedState.selectingCaptureSurface}"
          ng-click="sharedState.selectingCaptureSurface = !sharedState.selectingCaptureSurface">
      </div>
    </div>
    <div class="nonFatalIssue" ng-show="isAppInTab && receiverActs.length > 0">
      <angular-message desc="Details about how to improve the Cast experience" key="cast_popup_optimal_experience">
        Click the Cast icon in the player on this page for an optimal experience.
      </angular-message>
      <span class="learn-more-link" ng-click="onClickLearnCastEnabledPage()">
        <angular-message desc="Link to learn more about how to improve the Cast experience" key="cast_popup_optimal_experience_learn_more">
          Learn more
        </angular-message>
      </span>
    </div>
    <div style="-webkit-user-select: none;">
      <div class="device-selector" role="menu" aria-haspopup="true" aria-activedescendant="">
        <div ng-repeat="receiverAct in receiverActs" class="goog-menuitem" role="menuitem" ng-click="onClickReceiver(receiverAct)">
          <div class="goog-menuitem-content">
            <div class="chromecast-device"></div>{{receiverAct.receiver.name}}
            <div class="activity-title-in-receiver-list" ng-show="receiverAct.activity">
              {{receiverAct.activity.title}}
            </div>
          </div>
        </div>
        <div class="goog-menuseparator" role="separator"></div>
        <div class="goog-menuitem" role="menuitem" ng-click="showOptions()">
          <div class="goog-menuitem-content">
            <angular-message desc="Link to Cast extension options page" key="cast_popup_options_link">
              Options
            </angular-message>
          </div>
        </div>
        <div class="goog-menuitem" role="menuitem" ng-click="sendFeedback()">
          <div class="goog-menuitem-content">
            <angular-message desc="Link to Cast extension feedback page" key="cast_popup_feedback_link">
              Send feedback...
            </angular-message>
          </div>
        </div>
        <div class="goog-menuitem last-menuitem" role="menuitem" ng-click="showHelp()">
          <div class="goog-menuitem-content">
            <angular-message desc="Link to Cast extension help" key="cast_popup_help_link">
              Help
            </angular-message>
          </div>
        </div>
      </div>
    </div>
    <div class="capture-surface-selection" ng-show="sharedState.selectingCaptureSurface">
      <div ng-class="{'checkable-option':true, checked:settings.captureSurface == 'tab'}"
          ng-click="settings.captureSurface = 'tab'; updateSettings(); sharedState.selectingCaptureSurface = false">
        <angular-message desc="Link to Cast the current tab" key="cast_popup_cast_tab">
          Cast current tab
        </angular-message>
      </div>
      <div ng-class="{'checkable-option':true, checked:settings.captureSurface == 'desktop'}"
          ng-click="settings.captureSurface = 'desktop'; updateSettings(); sharedState.selectingCaptureSurface = false" ng-hide="disableProjectScreen">
        <angular-message desc="Link to Cast the entire screen" key="cast_popup_cast_screen">
          Cast entire screen
        </angular-message>
        <angular-message desc="Suffix shown for Cast entire screen denoting its experimental nature" key="cast_popup_cast_screen_experimental">
          (experimental)
        </angular-message>
      </div>
      <div class="goog-menuseparator" role="separator"></div>
      <div ng-class="{'checkable-option':true, checked:settings.lowFpsMode == true, 'disabled-option':settings.captureSurface == 'desktop'}"
          ng-click="toggleAudioIfTab();">
        <angular-message desc="Link to Cast in audio mode" key="cast_popup_cast_audio">
          Audio mode
        </angular-message>
      </div>
    </div>
  </div>

  <!-- activity control -->
  <div ng-switch-when="activity_control" class="activity-control">
    <div class="transparent-overlay" ng-show="sharedState.selectingMirrorQuality" ng-click="sharedState.selectingMirrorQuality = false"></div>

    <div class="activity-control-to-devices" ng-click="changeDevice()">
      &lsaquo;&nbsp;
      <angular-message desc="Link to return to the list of devices" key="cast_popup_back_to_list">
        Back to device list
      </angular-message>
    </div>
    <hr>
    <div class="nonFatalIssue" ng-show="isAppInTab">
      <angular-message desc="Details about how to improve the Cast experience" key="cast_popup_optimal_experience">
        Click the Cast icon in the player on this page for an optimal experience.
      </angular-message>
      <span class="learn-more-link" ng-click="onClickLearnCastEnabledPage()">
        <angular-message desc="Link to learn more about how to improve the Cast experience" key="cast_popup_optimal_experience_learn_more">
          Learn more
        </angular-message>
      </span>
    </div>

    <div class="nonFatalIssue" ng-show="issueMessage">
      {{issueMessage}}<br>
      <span ng-show="showIssueOptActButton" ng-click="actOnIssueWithOptAct()">{{issueOptActText}}</span>
      <span ng-click="actOnIssueWithDefaultAct()">{{issueDefaultActText}}</span>
    </div>
    <div class="activity-detail" ng-click="showOriginalTab()">
      <div class="activity-title-in-control">
        <img class="activity-icon" ng-src="{{selectedActivity.iconUrl}}">
        <div class="activity-title-text" title="{{selectedActivity.title}}">
          {{selectedActivity.title}}
        </div>
      </div>
      <div class="activity-status">
        <angular-message desc="Status about where the tab is playing its content" key="cast_popup_playing_on">
          Playing on <div class="device-name">{{selectedActivity.receiver.name}}</div>
        </angular-message>
      </div>
    </div>
    <table class="buttons-50pct">
      <tbody>
        <tr>
          <td class="button" ng-click="playOrPause()" ng-hide="disableMediaControl || !hasPause">
            <img ng-class="{disabledimg: disableMediaControl}" style="vertical-align:middle" ng-src="{{playPauseImg}}"></td>
          <td class="button" ng-click="muteOrUmute()" ng-hide="disableMediaControl">
            <img ng-class="{disabledimg: disableMediaControl}" style="vertical-align:middle" ng-src="{{muteUnmuteImg}}"></td>
          <td class="button" ng-click="sharedState.selectingMirrorQuality = true" ng-show="showMirrorQualityToggle">
            <img style="vertical-align:middle" ng-src="/data/mirror_quality.png"></td>
          <td ng-class="{button:true, large1:!disableMediaControl && (hasPause || showMirrorQualityToggle), large2:!disableMediaControl && !hasPause, large3:disableMediaControl && !hasPause}" ng-click="castThisTab()" ng-disabled="disableCastButton">Cast this tab</td>
          <td ng-class="{'button-action':true, large1:!disableMediaControl && (hasPause || showMirrorQualityToggle), large2:!disableMediaControl && !hasPause, large3:disableMediaControl && !hasPause}" ng-click="stopActivity()">Stop casting</td>
        </tr>
      </tbody>
    </table>

    <div class="mirror-quality-selection" ng-show="sharedState.selectingMirrorQuality">
      <div ng-repeat="mirrorQuality in mirrorQualities" ng-class="{'checkable-option':true, checked:settings.mirrorQualityId == mirrorQuality.id}"  ng-click="settings.mirrorQualityId = mirrorQuality.id; updateSettings(); sharedState.selectingMirrorQuality = false">{{mirrorQuality.name}}
      </div>
    </div>
  </div>

  <!-- issue notifier -->
  <div ng-switch-when="issue_notifier">
    <table>
      <tbody>
        <tr>
          <td class="sad-face"><img src="data/sad-face.png"></td>
          <td>
            <div class="issue-title">{{issueTitle}}</div>
            <div class="issue-message" ng-bind-html="issueMessage"></div>
          </td>
        </tr>
      </tbody>
    </table>
    <table class="buttons-50pct">
      <tbody>
        <tr>
          <td class="button" ng-show="showIssueOptActButton" ng-click="actOnIssueWithOptAct()">{{issueOptActText}}</td>
          <td class="button-action button" ng-click="actOnIssueWithDefaultAct()">{{issueDefaultActText}}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div ng-switch-default>
    <angular-message desc="Status that the page is loading" key="cast_popup_loading">
      Loading...
    </angular-message>
  </div>
</body>
</html>
